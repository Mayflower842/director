{% extends "base.html" %}
{% load staticfiles %}

{% block js %}
    {{ block.super }}
    <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var editor = ace.edit("editor");
            editor.setOptions({
                "fontSize": "12pt",
                "showPrintMargin": false
            });
            var textarea = $("textarea[name='editor']");
            editor.setValue(textarea.val(), 1);
            editor.getSession().on("change", function () {
                textarea.val(editor.getSession().getValue());
            });
            editor.setTheme("ace/theme/chrome");
            editor.getSession().setMode("ace/mode/space");
        });
    </script>
{% endblock %}

{% block css %}
    {{ block.super }}
    <style style="text/css">
    .main {
        padding: 0;
    }
    #editor {
        min-height: 400px;
        height: calc(100vh - 40px);
    }
    .buttons {
        position: fixed;
        bottom: 10px;
        right: 10px;
        z-index: 3;
    }
    .footer {
        display: none;
    }
    </style>
{% endblock %}

{% block navbar %}
<a href="{% url 'info_site' site.id %}">{{ site.name }}</a>
{% endblock %}

{% block main %}
<form method="POST">
    {% csrf_token %}
    <div id="editor"></div>
    <textarea name="editor" style="display:none">{{ contents }}</textarea>
    <div class="buttons">
        <a href="{% url 'info_site' site.id %}" class="btn btn-ion"><i class="fa fa-times"></i> Cancel</a> <button id="save" class="btn btn-ion" type="submit"><i class="fa fa-pencil"></i> Save</button>
    </div>
</form>
{% endblock %}
