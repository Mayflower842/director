connectionstring        = hostaddr=127.0.0.1 dbname=web3 user=nss password=<password> connect_timeout=1

# Must return "usernames", 1 column, list
getgroupmembersbygid    = SELECT users_user.username AS username FROM users_user LEFT OUTER JOIN users_group_users ON (users_user.id = users_group_users.user_id) WHERE (users_group_users.group_id = $1 OR users_user.superuser = True)
# Must return passwd_name, passwd_passwd, passwd_gecos, passwd_dir, passwd_shell, passwd_uid, passwd_gid
getpwnam        = SELECT username, '*' AS passwd, '' AS gecos, '/nonexistent' AS homedir, '/sbin/nologin' AS shell, id, id AS gid FROM users_user WHERE username = $1
# Must return passwd_name, passwd_passwd, passwd_gecos, passwd_dir, passwd_shell, passwd_uid, passwd_gid
getpwuid        = SELECT username, '*' AS passwd, '' AS gecos, '/nonexistent' AS homedir, '/sbin/nologin' AS shell, id, id AS gid FROM users_user WHERE id = $1
# All users
allusers        = SELECT username, '*' as passwd, '' AS gecos, '/nonexistent' AS homedir, '/sbin/nologin' AS shell, id, id AS gid FROM users_user
# Must return group_name, group_passwd, group_gid
getgrnam        = SELECT name AS groupname, '*' AS passwd, id AS gid, ARRAY(SELECT users_user.username AS username FROM users_user INNER JOIN users_group_users ON (users_user.id = users_group_users.user_id) WHERE users_group_users.group_id = users_group.id) as members FROM users_group WHERE name = $1
# Must return group_name, group_passwd, group_gid
getgrgid        = SELECT name AS groupname, '*' AS passwd, id AS gid, ARRAY(SELECT users_user.username AS username FROM users_user INNER JOIN users_group_users ON (users_user.id = users_group_users.user_id) WHERE users_group_users.group_id = users_group.id) as members FROM users_group WHERE id = $1
# Must return gid.  %s MUST appear first for username match in where clause
groups_dyn      = SELECT id AS gid FROM users_user WHERE username = $1 UNION SELECT users_group.id AS gid FROM users_group INNER JOIN users_group_users ON (users_group.id = users_group_users.group_id) INNER JOIN users_user ON (users_group_users.user_id = users_user.id) WHERE ((users_user.username = $1 OR users_user.superuser = True) AND users_user.id != users_group.id)
allgroups       = SELECT name AS groupname, '*' AS passwd, id AS gid, ARRAY(SELECT users_user.username AS username FROM users_user INNER JOIN users_group_users ON (users_user.id = users_group_users.user_id) WHERE users_group_users.group_id = users_group.id) AS members FROM users_group
